---
// src/pages/DashboardEmpleado.astro
import Layout from "../layouts/Layout.astro";
import NavBar from "../components/NavBar.astro";
import HeaderEmpleado from "../components/HeaderEmpleado.astro";
import CitaEmpleado from "../components/CitaEmpleado.astro";
import ActividadCita from "../components/ActividadCita.astro";
---

<Layout title="Dashboard Empleado">
    <div class="dashboard-empleado-container">
        <!-- Panel lateral izquierdo -->
        <div class="dashboard-empleado-nav-container">
            <NavBar />
        </div>

        <!-- Contenido principal -->
        <div class="dashboard-empleado-main-container">
            <HeaderEmpleado titulo="DASHBOARD EMPLEADO" nombreUsuario="EMPLEADO" />
            
            <main class="dashboard-empleado-content">
                <!-- Grid de 2 columnas para citas y actividades -->
                <div class="citas-actividades-grid">
                    
                    <!-- Columna 1: Citas del empleado -->
                    <div class="citas-empleado-column">
                        <div class="empleado-column-header">
                            <h2 class="empleado-column-title">Citas del Día</h2>
                            <div class="empleado-column-controls">
                                <input type="text" class="empleado-search-input" placeholder="Buscar cita..." />
                                <div class="empleado-pagination-controls">
                                    <button class="empleado-pagination-btn">‹</button>
                                    <span>1</span>
                                    <button class="empleado-pagination-btn">›</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="citas-empleado-list">
                            <CitaEmpleado 
                                cita="C001" 
                                fecha="2025-01-15" 
                                paciente="Juan Pérez" 
                                hora="10:00 AM" 
                                estado="Confirmada" 
                            />
                            <CitaEmpleado 
                                cita="C002" 
                                fecha="2025-01-15" 
                                paciente="María García" 
                                hora="11:30 AM" 
                                estado="Pendiente" 
                            />
                            <CitaEmpleado 
                                cita="C003" 
                                fecha="2025-01-15" 
                                paciente="Carlos López" 
                                hora="02:00 PM" 
                                estado="Confirmada" 
                            />
                            <CitaEmpleado 
                                cita="C004" 
                                fecha="2025-01-15" 
                                paciente="Ana Rodríguez" 
                                hora="03:30 PM" 
                                estado="Completada" 
                            />
                            <CitaEmpleado 
                                cita="C005" 
                                fecha="2025-01-15" 
                                paciente="Pedro Martínez" 
                                hora="04:45 PM" 
                                estado="Pendiente" 
                            />
                        </div>
                    </div>
                    
                    <!-- Columna 2: Actividades por cita -->
                    <div class="actividades-empleado-column">
                        <div class="empleado-column-header">
                            <h2 class="empleado-column-title">Actividades de la Cita</h2>
                            <button class="empleado-action-btn">
                                Guardar Cambios
                            </button>
                        </div>
                        
                        <div class="actividades-empleado-list">
                            <div class="empleado-selected-cita-info">
                                <h3>Cita: C001 - Juan Pérez</h3>
                                <p>10:00 AM - 15 Ene 2025</p>
                            </div>
                            
                            <ActividadCita 
                                actividad="Evaluación Inicial" 
                                descripcion="Evaluar condición del paciente y establecer objetivos" 
                                duracion="15" 
                                completada={true}
                            />
                            <ActividadCita 
                                actividad="Ejercicios de Movilidad" 
                                descripcion="Serie de ejercicios para mejorar rango de movimiento" 
                                duracion="25" 
                                completada={true}
                            />
                            <ActividadCita 
                                actividad="Terapia con Calor" 
                                descripcion="Aplicación de calor en zona afectada" 
                                duracion="10" 
                                completada={false}
                            />
                            <ActividadCita 
                                actividad="Ejercicios de Fortalecimiento" 
                                descripcion="Rutina para fortalecer músculos afectados" 
                                duracion="20" 
                                completada={false}
                            />
                            <ActividadCita 
                                actividad="Reevaluación y Planificación" 
                                descripcion="Evaluar progreso y planificar próxima sesión" 
                                duracion="10" 
                                completada={false}
                            />
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>
</Layout>

<script>
    // Script para manejar la selección de citas
    document.addEventListener('DOMContentLoaded', function() {
        const citasItems = document.querySelectorAll('.cita-empleado-item');
        
        citasItems.forEach(item => {
            item.addEventListener('click', function() {
                // Remover selección anterior
                citasItems.forEach(cita => cita.classList.remove('selected'));
                
                // Agregar selección a la cita clickeada
                this.classList.add('selected');
                
                // Aquí se cargaran las actividades correspondientes a una cita
                console.log('Cita seleccionada:', this.getAttribute('data-cita-id'));
            });
        });
        
        // Manejar checkboxes de actividades
        const actividadChecks = document.querySelectorAll('.actividad-cita-check');
        actividadChecks.forEach(check => {
            check.addEventListener('change', function() {
                const actividadItem = this.closest('.actividad-cita-item');
                if (this.checked) {
                    actividadItem.classList.add('completada');
                } else {
                    actividadItem.classList.remove('completada');
                }
            });
        });
    });
</script>































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































